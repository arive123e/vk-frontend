<!-- Это вставляется в index.html -->
<div id="vkid_container"></div>
<script src="https://unpkg.com/@vkid/sdk@<3.0.0/dist-sdk/umd/index.js"></script>
<script>
if ('VKIDSDK' in window) {
    VKID.Config.init({
        app: 53336238,
        redirectUrl: 'https://www.fokusnikaltair.xyz',
        responseMode: VKID.ConfigResponseMode.Callback,
        source: VKID.ConfigSource.LOWCODE
    });

    const oneTap = new VKID.OneTap();
    oneTap.render({
        container: document.getElementById('vkid_container'),
        showAlternativeLogin: true
    });

    oneTap.on(VKID.OneTapInternalEvents.LOGIN_SUCCESS, function(payload) {
        const code = payload.code;
        const deviceId = payload.device_id;

        VKID.Auth.exchangeCode(code, deviceId)
            .then(function(data) {
                // успешная авторизация
                console.log('VKID auth success', data);
            })
            .catch(function(error) {
                // обработка ошибки
                console.error('VKID auth error', error);
            });
    });
} else {
    console.error('VKIDSDK не загружен');
}
</script>
