<div>
  <script src="https://unpkg.com/@vkid/sdk@<3.0.0/dist-sdk/umd/index.js"></script>
  <script type="text/javascript">
    if ('VKIDSDK' in window) {
      const VKID = window.VKIDSDK;

      VKID.Config.init({
        app: 53336238,
        redirectUrl: 'https://vk-backend-w0we.onrender.com/auth/vk/callback',
        responseMode: VKID.ConfigResponseMode.Callback,
        source: VKID.ConfigSource.LOWCODE,
        scope: '', // –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω—É–∂–Ω—ã–º–∏ –¥–æ—Å—Ç—É–ø–∞–º–∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
      });

      const oneTap = new VKID.OneTap();

      oneTap.render({
        container: document.currentScript.parentElement,
        showAlternativeLogin: true
      })
      .on(VKID.WidgetEvents.ERROR, vkidOnError)
      .on(VKID.OneTapInternalEvents.LOGIN_SUCCESS, function (payload) {
        const code = payload.code;
        const deviceId = payload.device_id;

        VKID.Auth.exchangeCode(code, deviceId)
          .then(vkidOnSuccess)
          .catch(vkidOnError);
      });

      function vkidOnSuccess(data) {
        // –ú–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è: localStorage.setItem('vk_token', JSON.stringify(data));
        // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—Ö–∞
        window.location.href = '/success.html';
      }

      function vkidOnError(error) {
        // –ú–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –æ—à–∏–±–∫—É –≤ –∫–æ–Ω—Å–æ–ª—å, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        // console.error('–û—à–∏–±–∫–∞ VKID', error);
        // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—à–∏–±–∫–∏
        window.location.href = '/error.html';
      }
    }

    // –î–ª—è —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–º–æ—â–∏ ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É "–ü–æ–º–æ—â—å":
    function goToHelp() {
      window.location.href = '/help.html';
    }
  </script>
  <!-- –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∫–Ω–æ–ø–∫—É –ø–æ–º–æ—â–∏ –ø—Ä—è–º–æ —Ç—É—Ç -->
  <!-- <button onclick="goToHelp()" style="margin-top:20px;">üîÆ –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?</button> -->
</div>
