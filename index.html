<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–∞–≥–∏—á–µ—Å–∫–∏–π –±–æ—Ç ‚Äî –§–æ–∫—É—Å–Ω–∏–∫ –ê–ª—å—Ç–∞–∏—Ä</title>
  <!-- Google Fonts: Marcellus SC –∏ Roboto Slab -->
  <link href="https://fonts.googleapis.com/css2?family=Marcellus+SC:wght@400;700&family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --violet: #7847c7;
      --turquoise: #1de9b6;
      --gold: #ffe082;
      --dark: #1e1733;
      --white: #fff;
      --light-gold: #fff7d6;
      --shadow: 0 8px 32px 0 rgba(40,20,70,0.14);
    }
    body {
      min-height: 100vh;
      margin: 0;
      font-family: 'Roboto Slab', 'Marcellus SC', serif;
      background: linear-gradient(135deg, #764ba2 0%, #667eea 80%, #1de9b6 100%);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .magic-bg {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }
    .container {
      position: relative;
      z-index: 1;
      max-width: 420px;
      width: 90vw;
      margin: 48px auto;
      background: var(--white);
      border-radius: 28px;
      box-shadow: var(--shadow);
      padding: 36px 32px 28px 32px;
      text-align: center;
      overflow: hidden;
      animation: fadeInUp 1s cubic-bezier(.8,-0.1,.2,1.2);
    }
    @keyframes fadeInUp {
      from { opacity:0; transform: translateY(60px);}
      to { opacity:1; transform: translateY(0);}
    }
    .main-title {
      font-family: 'Marcellus SC', serif;
      font-size: 2.2em;
      font-weight: 700;
      color: var(--violet);
      margin-bottom: 0.3em;
      line-height: 1.16;
      text-shadow: 0 2px 16px #d0b3ff70;
      letter-spacing: 0.02em;
    }
    .subtitle {
      font-family: 'Marcellus SC', serif;
      font-size: 1.08em;
      font-style: italic;
      color: var(--turquoise);
      margin-bottom: 20px;
      margin-top: 0;
      font-weight: 500;
      letter-spacing: 0.01em;
    }
    .desc {
      color: #191523;
      font-size: 1.03em;
      font-family: 'Roboto Slab', serif;
      margin-bottom: 20px;
      line-height: 1.5;
      font-weight: 400;
      letter-spacing: 0.01em;
    }
    .magic-line {
      color: #b69226;
      font-size: 1em;
      margin: 14px 0 18px 0;
      font-family: 'Marcellus SC', serif;
      letter-spacing: 0.01em;
      opacity: 0.97;
      animation: magicFade 2.5s infinite alternate;
    }
    .magic-note {
      color: #b69226;
      background: #fffbe8;
      padding: 7px 0 5px 0;
      border-radius: 12px;
      margin: 7px 0 0 0;
      font-size: 0.97em;
      font-weight: 600;
      text-align: center;
      display: block;
      letter-spacing: 0.01em;
      box-shadow: 0 0 10px #ffe08255;
      transition: background 0.3s;
      font-family: 'Roboto Slab', serif;
    }
    @keyframes magicFade {
      from { text-shadow: 0 0 2px #f9de91, 0 0 6px #fff176; }
      to   { text-shadow: 0 0 10px #fff9c4, 0 0 24px #ffd740;}
    }
    .features {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 20px 0 16px 0;
      flex-wrap: wrap;
    }
    .feat-card {
      background: var(--violet);
      color: var(--white);
      border-radius: 16px;
      padding: 13px 16px;
      font-size: 1em;
      font-weight: 500;
      margin: 3px 0;
      box-shadow: 0 2px 10px #c2a6e99a;
      min-width: 110px;
      transition: background 0.2s, transform 0.12s;
      cursor: default;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      font-family: 'Roboto Slab', serif;
      animation: fadeInUp 1.4s cubic-bezier(.8,-0.1,.2,1.2);
    }
    .magic-btn {
      display: inline-block;
      background: linear-gradient(90deg, #25e6bc 10%, #6e74e9 100%);
      color: #fff;
      font-size: 1.18em;
      font-weight: 700;
      font-family: 'Marcellus SC', serif;
      padding: 14px 20px 12px 20px;
      border: none;
      border-radius: 18px;
      box-shadow: 0 2px 14px #79e2c861, 0 0px 0 #fff;
      cursor: pointer;
      margin: 24px 0 8px 0;
      text-decoration: none;
      letter-spacing: 0.03em;
      transition: transform 0.13s, box-shadow 0.16s;
      position: relative;
      overflow: hidden;
      animation: pulseBtn 2.2s infinite alternate;
    }
    .magic-btn:active, .magic-btn:focus {
      transform: scale(0.97);
      box-shadow: 0 0px 6px #79e2c888;
      outline: none;
    }
    @keyframes pulseBtn {
      from { box-shadow: 0 2px 18px #c8fbe9cc; }
      to   { box-shadow: 0 4px 30px #e1e4ff77;}
    }
    /* üîÑ NEW: VK ID button styles */
    #vk-auth-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #0077FF;
      color: #fff;
      font-family: Arial, sans-serif;
      font-weight: 400;
      font-size: 16px;
      border: none;
      border-radius: 24px;
      height: 48px;
      min-width: 220px;
      padding: 0 24px;
      margin: 18px 0 10px 0;
      cursor: pointer;
      box-shadow: none;
      transition: filter 0.2s;
    }
    #vk-auth-btn:hover {
      filter: brightness(110%);
    }
    #vk-auth-btn svg {
      flex-shrink: 0;
    }
    #vk-status {
      min-height: 24px;
      color: #7847c7;
      font-size: 1em;
      margin: 8px 0 0 0;
      font-family: 'Roboto Slab', serif;
      font-weight: 500;
      text-align: center;
    }
    .policy-link {
      color: #97730f;
      text-decoration: underline;
      font-size: 0.98em;
      font-weight: 500;
    }
    .policy-link:hover {
      color: #b69226;
      text-decoration: underline;
    }
    .footer {
      color: #66646e;
      font-size: 0.93em;
      margin-top: 12px;
      text-align: center;
      font-family: 'Roboto Slab', serif;
      word-break: break-all;
    }
    .contact-link {
      color: #228ca3;
      text-decoration: underline;
    }
    .contact-link:hover {
      color: #1e1733;
    }
    .star {
      position: absolute;
      font-size: 1.6em;
      opacity: 0.14;
      animation: stars 3.2s linear infinite;
      pointer-events: none;
    }
    .star-1 { left: 22%; top: 18%; animation-delay: 0s;}
    .star-2 { right: 19%; top: 13%; font-size:2.1em; animation-delay: .7s;}
    .star-3 { left: 16%; bottom: 14%; font-size:1.3em; animation-delay: 1.1s;}
    .star-4 { right: 15%; bottom: 21%; font-size:1.8em; animation-delay: 1.6s;}
    .star-5 { left: 48%; top: 24%; font-size:1.1em; animation-delay: 2.4s;}
    @keyframes stars {
      0%   { opacity: 0.13; transform: scale(0.9) rotate(0deg);}
      47%  { opacity: 0.23;}
      60%  { opacity: 0.35; transform: scale(1.3) rotate(19deg);}
      100% { opacity: 0.11; transform: scale(0.7) rotate(-30deg);}
    }
    @media (max-width: 600px) {
      .container { padding: 19px 4vw 20px 4vw; }
      .main-title { font-size: 1.28em;}
      .features { flex-direction: column; gap: 0;}
      .feat-card { min-width: 90px; font-size:0.97em;}
      .magic-btn { font-size: 1em; padding: 13px 0; width: 97%; }
      #vk-auth-btn { font-size: 0.98em; padding: 0 8vw; min-width: 150px;}
    }
  </style>
</head>
<body>
  <!-- –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–≤—ë–∑–¥–æ—á–∫–∏ -->
  <div class="magic-bg">
    <span class="star star-1">‚ú®</span>
    <span class="star star-2">üü£</span>
    <span class="star star-3">üîÆ</span>
    <span class="star star-4">‚≠ê</span>
    <span class="star star-5">ü™Ñ</span>
  </div>
  <div class="container">
    <div class="main-title">
      –ú–∞–≥–∏—á–µ—Å–∫–∏–π –±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫<br>‚Äú–§–æ–∫—É—Å–Ω–∏–∫ –ê–ª—å—Ç–∞–∏—Ä üßôüèº‚Äç‚ôÇÔ∏è‚Äù
    </div>
    <div class="subtitle">
      <span style="font-style:italic;">–ü–æ–º–æ–≥–∞–µ—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –≤–∞–∂–Ω–æ–º –∏ –Ω–µ –∑–∞–ª–∏–ø–Ω—É—Ç—å –≤ –ª–µ–Ω—Ç–µ</span>
    </div>
    <div class="desc">
      –≠—Ç–æ—Ç –±–æ—Ç —É–º–µ–µ—Ç –≤ –æ–¥–Ω–æ –∫–∞—Å–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –≤–∞—à–∏—Ö –ª—é–±–∏–º—ã—Ö VK-–≥—Ä—É–ø–ø –ø—Ä—è–º–æ –≤ Telegram.<br>
      –ë–µ–∑ –ª–∏—à–Ω–∏—Ö —Ö–ª–æ–ø–æ—Ç ‚Äî —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —Å –º–∞–≥–∏—á–µ—Å–∫–∏–º —É–¥–æ–±—Å—Ç–≤–æ–º –∏ –∑–∞–±–æ—Ç–æ–π –æ –≤–∞—à–µ–π –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ ‚ú®
    </div>
    <div class="magic-line">
      –ü—É—Å—Ç—å —Ü–∏—Ñ—Ä–æ–≤–∞—è –ª–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ–±—è, –∞ –Ω–µ –Ω–∞–æ–±–æ—Ä–æ—Ç<br>
      –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏ –≤–æ–ª—à–µ–±—Å—Ç–≤–æ –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º ü™Ñ
    </div>
    <div class="features">
      <div class="feat-card">–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∞—è –ª–µ–Ω—Ç–∞ VK üü£</div>
      <div class="feat-card">–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram üîí</div>
      <div class="feat-card">–ü—Ä–æ—Å—Ç–æ –±—ã—Å—Ç—Ä–æ –º–∞–≥–∏—á–µ—Å–∫–∏ ‚≠ê</div>
    </div>
    <!-- üîÑ NEW: –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ VK ID -->
    <button id="vk-auth-btn" aria-label="–í–æ–π—Ç–∏ —Å VK ID">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" style="margin-right: 10px;">
        <rect width="28" height="28" rx="14" fill="#fff"/>
        <path d="M14 0C6.27 0 0 6.27 0 14s6.27 14 14 14 14-6.27 14-14S21.73 0 14 0zm5.32 10.24c.12-.41 0-.67-.58-.67h-1.93c-.48 0-.7.24-.81.52 0 0-1 2.41-2.4 3.97-.46.46-.67.6-.93.6-.13 0-.31-.13-.31-.52v-3.81c0-.45-.13-.67-.52-.67h-2.98c-.29 0-.48.21-.48.43 0 .41.61.5.67 1.67v2.49c0 .55-.1.65-.3.65-.59 0-2.02-2.4-2.87-5.13-.15-.44-.32-.57-.74-.57H4.56c-.41 0-.41.19-.41.46 0 .46.7 2.88 3.37 6.06 1.41 1.69 2.89 1.63 2.89 1.63h1.18c.41 0 .56-.19.61-.42 0 0 .16-.39.23-.53.07-.15.21-.18.31-.18.09 0 .22.03.33.13.1.09.13.21.13.33v1.09c0 .32.08.45.47.45h1.99c.27 0 .45-.12.49-.39.04-.24-.07-.38-.28-.46-.39-.13-1.18-.42-1.68-1.11-.14-.18-.22-.38-.18-.6.06-.32.29-.53.62-.53h1.68c.47 0 .83-.11 1.13-.32.3-.21.54-.55.73-1 .19-.45.29-.94.29-1.48v-1.06c0-.46-.17-.68-.5-.68-.28 0-.46.19-.54.41z" fill="#0077FF"/>
      </svg>
      –í–æ–π—Ç–∏ —Å VK ID
    </button>
    <div id="vk-status"></div>
    <!-- –ö–Ω–æ–ø–∫–∞ Telegram -->
    <a class="magic-btn" href="https://t.me/mytestvk_bot" target="_blank" rel="noopener">
      –ü–µ—Ä–µ–π—Ç–∏ –≤ Telegram –∏ –Ω–∞—á–∞—Ç—å –º–∞–≥–∏—é üîÆ
    </a>
    <div class="magic-note">
      –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é VK ID<br>
      –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥ –æ—Ö—Ä–∞–Ω–æ–π –º–∞–≥–∏—á–µ—Å–∫–æ–π –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏<br>
      <a href="https://api.fokusnikaltair.xyz/privacy.html" class="policy-link" target="_blank">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
    </div>
    <div class="footer">
      –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–∞–≥–∏—Å—Ç—Ä–æ–º –±–æ—Ç–∞: <a class="contact-link" href="mailto:altair93055@gmail.com">altair93055@gmail.com</a>
    </div>
  </div>
  <!-- üîÑ NEW: JS –¥–ª—è PKCE –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ VK ID -->
  <script>
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ code_verifier
    function generateCodeVerifier(length = 128) {
      const charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~';
      let result = '';
      const array = new Uint32Array(length);
      window.crypto.getRandomValues(array);
      for (let i = 0; i < length; i++) {
        result += charset[array[i] % charset.length];
      }
      return result;
    }

    // Base64 URL-encode
    function base64UrlEncode(buffer) {
      return btoa(String.fromCharCode(...new Uint8Array(buffer)))
        .replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SHA256 —Ö–µ—à–∞ –∏ Base64URL –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (code_challenge)
    async function generateCodeChallenge(codeVerifier) {
      const encoder = new TextEncoder();
      const data = encoder.encode(codeVerifier);
      const hash = await window.crypto.subtle.digest('SHA-256', data);
      return base64UrlEncode(hash);
    }

    async function startVkAuth() {
      const statusEl = document.getElementById('vk-status');
      statusEl.textContent = '–ì–æ—Ç–æ–≤–∏–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é VK ID...';

      const client_id = '53336238';
      const redirect_uri = encodeURIComponent('https://api.fokusnikaltair.xyz/vk-callback.html');
      const scope = 'groups';
      const response_type = 'code';
      const state = Date.now().toString(); // –ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å tg_id, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

      const codeVerifier = generateCodeVerifier();
      sessionStorage.setItem('code_verifier', codeVerifier);
      const codeChallenge = await generateCodeChallenge(codeVerifier);

      const url = `https://id.vk.com/authorize?client_id=${client_id}&redirect_uri=${redirect_uri}&scope=${scope}&response_type=${response_type}&state=${state}&code_challenge=${codeChallenge}&code_challenge_method=S256`;

      window.location.href = url;
    }

    document.getElementById('vk-auth-btn').addEventListener('click', startVkAuth);
  </script>
</body>
</html>
